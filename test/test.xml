<document>

	<styles>
		<style name="title" size="30" font="Helvetica" />
		<style name="standard" size="11" font="Helvetica" color="black" />
		<style name="standard-bold" size="11" font="Helvetica-Bold" color="black" />
		<style name="red" size="11" font="Helvetica" color="red" opacity="0.1" />
		<style name="tablecell" size="10" font="Helvetica" color="black" />
		<style name="little" size="9" font="Helvetica" color="black" />
		<style name="tiny" size="6.3" font="Helvetica" color="black" />
	</styles>

	<page size="A4" layout="portrait" margins="{ top: 0, bottom: 0, left: 0, right: 0 }">
		<image x="50" y="30" src="test/logo-tacadoli.png" width="150" />
		<text style="little" x='50' y='90'>
		572 Avenue du Club Hippiques
		Immeuble Le Derby
		13090 Aix-en-Provence
		Tél. 00 701 000 00 | Site : xxxxx.com
		E-mail : souscription@xxx.com
		Siren : XXX XXX 839 | Orias : XXXXXXXX
		</text>


		<text style="title" x='290' y='42'>{{invoice.type}}</text>
		<if condition="{{invoice.duplicata}}==true">
			<text style="red" x='290' y='{{lastY}}-6'>DUPLICATA</text>
		</if>


		<line x="100" y="281" dx="300" dy="0" lineWidth="0.5" strokeColor="red" />

		<text style="standard" x='320' y='130'>{{invoice.customer.address}}</text>
		<text style="standard" x='320' y='{{lastY}}'>{{invoice.customer.zip}} {{invoice.customer.city}}</text>

		<text style="standard" x='50' y='164'>{{invoice.type}} N° {{invoice.num}}</text>
		<text style="standard" x='50' y='{{lastY}}'>Du {{invoice.date}}</text>
		<text style="standard" x='50' y='{{lastY}}'>N° Client {{invoice.customer.code}}</text>

		<text style="standard" x='50' y='{{lastY}}+40'>{{invoice.address_fac}}</text>


		<declare var="posY" val="300" />
		<text style="standard-bold" x='45' y='{{posY}}'>Désignation</text>
		<text style="standard-bold" x='365' y='{{posY}}' align="right" width="50">P Net</text>
		<text style="standard-bold" x='415' y='{{posY}}' align="right" width="50">P HT</text>
		<text style="standard-bold" x='475' y='{{posY}}' align="center" width="30">Qté</text>
		<text style="standard-bold" x='505' y='{{posY}}' align="right" width="50">HT+Net</text>
		<declare var="posY" val="{{posY}}+20" />
		<paths lineWidth="0.5" strokeColor="#585858">
			<line x="30" y="{{posY}}-5" dx="536" dy="0" />
			<line x="30" y="{{posY}}-28" dx="536" dy="0" />
		</paths>
		<declare var="posY" val="{{posY}}+6" />
		<declare var="posYSaved" val="0" />
		<for var="invoice.lines" as="line">
			<text x="45" y="{{posY}}" style="tablecell" width="310">{{line.desc}}</text>
			<declare var="posYSaved" val="{{lastY}}" />
			<qrcode x="100" y="{{posY}}" value="'{{line.qrcode}}'" options="{}" width="30" />
			<barcode x="200" y="{{posY}}" value="'{{line.qrcode}}'" width="100" options="{ fontSize: 40, background: '#4b8b7f', lineColor: '#ffffff', margin: 40, marginLeft: 80 }" />

			<declare var="posYSaved" val="{{lastY}}" />
			<text x="365" y="{{posY}}" align="right" width="50" style="tablecell">{{line.pricenet}}</text>
			<text x="415" y="{{posY}}" align="right" width="50" style="tablecell">{{line.priceunity}}</text>
			<text x="475" y="{{posY}}" align="center" width="30" style="tablecell">{{line.qty}}</text>
			<text x="505" y="{{posY}}" align="right" width="50" style="tablecell">{{line.pricetotal}}</text>
			<paths lineWidth="0.5" strokeColor="#585858">
				<line x="30" y="{{posYSaved}}+2" dx="536" dy="0" />
			</paths>
			<declare var="posY" val="{{posYSaved}}+8" />
			<if condition="{{posYSaved}}>400">
				<newpage />
				<declare var="posY" val="30" />
			</if>
		</for>

		<paths lineWidth="0.5" strokeColor="red">
			<rect x="283" y="400" w="283" h="112" />
		</paths>
		<!-- <roundedRect x="283" y="460" w="283" h="112" radius="10" strokeColor="green" />
		<ellipse x="283" y="460" w="283" h="112" strokeColor="green" />
		<circle x="283" y="460" w="112" strokeColor="purple" /> -->

		<declare var="posY" val="420" />
		<if condition="{{invoice.totalnet}}>0">
			<text style="standard" x='275' y='{{posY}}' align="right" width="158">Total net :</text>
			<text style="standard" x='473' y='{{posY}}' align="right" width="76">{{invoice.totalnet}}</text>
			<declare var="posY" val="{{posY}}+14" />
		</if>
		<text style="standard" x='275' y='{{posY}}' align="right" width="158">Total HT :</text>
		<text style="standard" x='473' y='{{posY}}' align="right" width="76">{{invoice.totalht}} €</text>
		<declare var="posY" val="{{posY}}+14" />
		<if condition="{{invoice.totalport}}>0">
			<text style="standard" x='275' y='{{posY}}' align="right" width="158">Frais de port HT :</text>
			<text style="standard" x='473' y='{{posY}}' align="right" width="76">{{invoice.totalport}} €</text>
			<declare var="posY" val="{{posY}}+14" />
		</if>
		<if condition="{{invoice.totalremise}}>0">
			<text style="standard" x='275' y='{{posY}}' align="right" width="158">Remise HT:</text>
			<text style="standard" x='473' y='{{posY}}' align="right" width="76">{{invoice.totalremise}}</text>
			<declare var="posY" val="{{posY}}+14" />
		</if>
		<for var="invoice.tvas" as="tva">
			<text style="standard" x='275' y='{{posY}}' align="right" width="158">TVA ({{tva.rate}}%) :</text>
			<text style="standard" x='473' y='{{posY}}' align="right" width="76">{{tva.amount}} €</text>
			<declare var="posY" val="{{posY}}+14" />
		</for>
		<text style="standard-bold" x='275' y='{{posY}}' align="right" width="158">Total TTC :</text>
		<text style="standard-bold" x='473' y='{{posY}}' align="right" width="76">{{invoice.totalttc}} €</text>

		<declare var="posY" val="{{posY}}+14" />
		<if condition="{{invoice.paymentremaining}}>0">
			<text style="standard-bold" x='275' y='{{posY}}' align="right" width="158">Reste à payer :</text>
			<text style="standard-bold" x='473' y='{{posY}}' align="right" width="76">{{invoice.paymentremaining}}</text>
			<declare var="posY" val="{{posY}}+14" />
		</if>

		<if condition="{{invoice.totalnet}}>0">
			<text style="little" x='295' y='516'>TVA non applicable sur assurance - article 261C/2ème du CGI</text>
		</if>


		<if condition="'{{invoice.type}}'=='Facture'">
			<text style="standard-bold" x='34' y='665'>Règlement joint à la commande</text>
			<paths lineWidth="0.5" strokeColor="#585858">
				<rect x="34" y="687" w="11" h="11" />
				<rect x="34" y="707" w="11" h="11" />
				<rect x="34" y="727" w="11" h="11" />
				<rect x="34" y="747" w="11" h="11" />
				<rect x="95" y="747" w="43" h="11" />
				<rect x="140" y="747" w="43" h="11" />
				<rect x="185" y="747" w="43" h="11" />
				<rect x="230" y="747" w="43" h="11" />
				<rect x="475" y="747" w="43" h="11" />

				<rect x="140" y="763" w="43" h="11" />
				<rect x="185" y="763" w="43" h="11" />

			</paths>
			<text style="standard" x='50' y='688'>Par chèque</text>
			<text style="standard" x='50' y='708'>Par mandat</text>
			<text style="standard" x='50' y='728'>Par virement CCP Marseille 87300F</text>
			<text style="standard" x='50' y='748'>Par CB : </text>
			<text style="little" x='50' y='765'>Date et picto :</text>
		</if>


		<!-- 
		<paths lineWidth="0.5" strokeColor="#D6F9FE" fillColor="#D6F9FE">
			<rect x="0" y="538" w="600" h="310" />
		</paths>
		<text style="little2" x='440' y='570'>{{pe_num}}/{{invoice.num}}</text>
		<text style="little2" x='270' y='665'>{{ip_start}}</text>
		<text style="little2" x='270' y='691'>{{ip_stop}}</text>
		<text style="little2" x='350' y='645'>{{co_firstname}} {{co_name}}</text>
		<text style="little2" x='440' y='614'>{{co_dateofbirth}}</text>
		<text style="little2" x='440' y='628'>{{co_address1}} {{co_address2}}</text>
		<text style="little2" x='440' y='655'>{{co_zip}}</text>
		<text style="little2" x='440' y='668'>{{co_city}}</text>
		<text style="little2" x='468' y='712'>{{co_siret}}</text> -->

	</page>

	<page size="A4" layout="portrait" margins="{ top: 0, bottom: 0, left: 0, right: 0 }">
		<text style="tiny" x='20' y='20' width="270" align="justify">xxxxx</text>

		<text style="tiny" x='310' y='20' width="270" align="justify">xxxx</text>

		<!-- <paths lineWidth="0.5" strokeColor="#D6F9FE" fillColor="#D6F9FE">
			<rect x="0" y="538" w="600" h="310" />
		</paths> -->
	</page>
</document> 
